{"pages":[],"posts":[{"title":"常见的跨域方法","text":"总结了开发种常见的几种跨域方法。 Demo地址: https://github.com/FatDong1/cross-origin Q：为什么会出现跨域出于浏览器的同源策略限制，浏览器会拒绝跨域请求。 注：严格的说，浏览器并不是拒绝所有的跨域请求，实际上拒绝的是跨域的读操作。浏览器的同源限制策略是这样执行的： 通常浏览器允许进行跨域写操作（Cross-origin writes），如链接，重定向；通常浏览器允许跨域资源嵌入（Cross-origin embedding），如 img、script 标签；通常浏览器不允许跨域读操作（Cross-origin reads）。 Q：什么情况下算跨域非同源请求，均为跨域。名词解释：同源 —— 如果两个页面拥有相同的协议（protocol），端口（port）和主机（host），那么这两个页面就属于同一个源（origin）。 主机URL：http://www.example.com 是否跨域 原因 http://www.example.com/a.html 否 同源 https://www.example.com/a.html 是 协议不同 http://www.example.com:8080/a.html 是 端口不同 http://example.com/a.html 是 主机不同（二级域名不同） Q：如何跨域CORS（跨域资源共享） 此方法需要前后端配合 MDN 关于跨域资源共享的解释 简单点来说就是当服务器在返回响应时，在其响应报文头的 Access-Control-Allow-Origin 中返回允许访问的域，或者返回 * 表示允许任意外域访问。 请求报文 12345678910GET /resources/public-data/ HTTP/1.1Host: bar.otherUser-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.5; en-US; rv:1.9.1b3pre) Gecko/20081130 Minefield/3.1b3preAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8Accept-Language: en-us,en;q=0.5Accept-Encoding: gzip,deflateAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7Connection: keep-aliveReferer: http://foo.example/examples/access-control/simpleXSInvocation.htmlOrigin: http://foo.example 请求报文的第10行：Origin: foo.example 表明该请求来源于 foo.exmaple。 响应报文 123456789HTTP/1.1 200 OKDate: Mon, 01 Dec 2008 00:23:53 GMTServer: Apache/2.0.61 Access-Control-Allow-Origin: *Keep-Alive: timeout=2, max=100Connection: Keep-AliveTransfer-Encoding: chunkedContent-Type: application/xml[XML Data] 响应报文的第4行：Access-Control-Allow-Origin: * 表明该资源可以被任意外域访问。 JSONP（JSON with padding） 此方法需要前后端配合 原理：web 页面上调用 js 文件不受跨域影响（Cross-origin embedding）。前端在页面上请求 js 文件，并在查询字符串 callback 中带上方法名。 1&lt;script src=&quot;http://localhost:3001?callback=myFunction&quot;&gt;&lt;/script&gt; 后端获取到方法名之后，返回一个函数调用，函数的参数就是我们想要的数据。 1myFunction({'message': 'hello world from JSONP!🙃'}); postMessage 适用于同一页面的不同窗体（iframe）。 语法：otherWindow.postMessage(message, targetOrigin, [transfer]); otherWindow其他窗口的一个引用，比如 iframe 的 contentWindow 属性、执行 window.open 返回的窗口对象、或者是命名过或数值索引的 window.frames。 message将要发送到其他 window 的数据。它将会被结构化克隆算法序列化。这意味着你可以不受什么限制的将数据对象安全的传送给目标窗口而无需自己序列化。 targetOrigin通过窗口的 origin 属性来指定哪些窗口能接收到消息事件，其值可以是字符串” * “（表示无限制）或者一个 URI。在发送消息的时候，如果目标窗口的协议、主机地址或端口这三者的任意一项不匹配 targetOrigin 提供的值，那么消息就不会被发送；只有三者完全匹配，消息才会被发送。这个机制用来控制消息可以发送到哪些窗口；例如，当用 postMessage 传送密码时，这个参数就显得尤为重要，必须保证它的值与这条包含密码的信息的预期接受者的 origin 属性完全一致，来防止密码被恶意的第三方截获。如果你明确的知道消息应该发送到哪个窗口，那么请始终提供一个有确切值的 targetOrigin，而不是*。不提供确切的目标将导致数据泄露到任何对数据感兴趣的恶意站点。 transfer 可选是一串和 message 同时传递的 Transferable 对象. 这些对象的所有权将被转移给消息的接收方，而发送一方将不再保有所有权。 例： 1234567&lt;body&gt;&lt;div id=&quot;father&quot;&gt; &lt;p&gt;这里3000端口&lt;/p&gt; &lt;input type=&quot;text&quot;/&gt; &lt;button&gt;发送信息给 3001 端口&lt;/button&gt;&lt;/div&gt;&lt;iframe id=&quot;child&quot; src=&quot;http://localhost:3001&quot;&gt;&lt;/iframe&gt; localhost:300012// 从 3000 端口向 3001 端口推送消息childFrame.postMessage('消息内容', 'http://localhost:3001'); localhost:300112345678910//从 3001 端口接收消息window.addEventListener('message', receiveMessage, false);function receiveMessage (event) { if (event.origin !== 'http://localhost:3000') { return false } // 从 3000 端口向 3001 端口推送消息 parentWindow.postMessage('我收到你的消息了', 'http://localhost:3000/');} 文章内容有误? 请点击 这里 提交 issues。 &nbsp;&nbsp; Vector Landscape by Vecteezy","link":"/2021/03/18/cross-origin/"},{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/2021/03/15/hello-world/"},{"title":"集约化平台标签注意事项","text":"本篇文章总结了开普集约化平台的各类注意事项。 文章详情页页面的时间为 DATEFORMAT=&quot;yyyy-MM-dd HH:mm&quot; 24小时制，当为 &quot;yyyy-MM-dd hh:mm&quot; 时，则为12小时制 不同栏目的标签要求首页 前3个 index.html123&lt;meta name=&quot;SiteName&quot; content=&quot;&lt;CMSPRO_WEBSITE FIELD='name' code=''&gt;&lt;/CMSPRO_WEBSITE&gt;&quot;&gt;&lt;meta name=&quot;SiteDomain&quot; content=&quot;www.xinjin.gov.cn&quot;&gt; // &lt;--注意替换&lt;meta name=&quot;SiteIDCode&quot; content=&quot;5101320017&quot;&gt; // &lt;--注意替换 列表页 前面7个 list.html1234&lt;meta name=&quot;ColumnName&quot; content=&quot;&lt;CMSPRO_CHANNEL CODE='' FIELD='channelName'&gt;&lt;/CMSPRO_CHANNEL&gt;&quot;&gt;&lt;meta name=&quot;ColumnDescription&quot; content=&quot;&lt;CMSPRO_CHANNEL CODE='' FIELD='channelName'&gt;&lt;/CMSPRO_CHANNEL&gt;&quot;&gt;&lt;meta name=&quot;ColumnKeywords&quot; content=&quot;&lt;CMSPRO_CHANNEL CODE='' FIELD='channelName'&gt;&lt;/CMSPRO_CHANNEL&gt;&quot;&gt;&lt;meta name=&quot;ColumnType&quot; content=&quot;&lt;CMSPRO_CHANNEL CODE='' FIELD='channelName'&gt;&lt;/CMSPRO_CHANNEL&gt;&quot;&gt; 详情页 前面10个 detail.html123&lt;meta name=&quot;ArticleTitle&quot; content=&quot;&lt;CMSPRO_DOCUMENT FIELD='title' num='100'&gt;标题 &lt;/CMSPRO_DOCUMENT&gt;&quot;&gt;&lt;meta name=&quot;PubDate&quot; content=&quot;&lt;CMSPRO_DOCUMENT field='publishedTime' dateformat='yyyy-MM-dd HH:mm'&gt;&lt;/CMSPRO_DOCUMENT&gt;&quot;&gt;&lt;meta name=&quot;ContentSource&quot; content=&quot;&lt;CMSPRO_DOCUMENT FIELD='source' DOMAINMETADATANAME='信息来源'&gt;信息来源&lt;/CMSPRO_DOCUMENT&gt;&quot;&gt; 详情页 非必需 但是建议都加上，以免后面又变成必须的 detail.html12&lt;meta name=&quot;Keywords&quot; content=&quot;&lt;CMSPRO_DOCUMENT FIELD='title' NUM='100'&gt;标题 &lt;/CMSPRO_DOCUMENT&gt;&quot;&gt;&lt;meta name=&quot;Description&quot; content='&lt;#if cmsInfo.memo?exists&gt;~-!{cmsInfo.memo!&quot;&quot;}&lt;#else&gt;~-!{formatHtml(cmsInfo.content?default(&quot;&quot;),&quot;50&quot;,&quot;&quot;)}&lt;/#if&gt;,' /&gt;","link":"/2021/03/15/jiyuehua-notice/"},{"title":"集约化平台标签","text":"本篇文章总结了开普集约化平台的常用标签。 栏目1234&lt;CMSPRO_WEBSITE FIELD='url'&gt;&lt;/CMSPRO_WEBSITE&gt;&lt;CMSPRO_CHANNEL CODE='' FIELD='url'&gt;&lt;/CMSPRO_CHANNEL&gt;&lt;CMSPRO_CHANNEL CODE=&quot;&quot; FIELD=&quot;channelName&quot;&gt;&lt;/CMSPRO_CHANNEL&gt;&lt;CMSPRO_CHANNEL CODE=&quot;&quot; FIELD=&quot;memo&quot;&gt;栏目描述&lt;/CMSPRO_CHANNEL&gt; 获取文章12345678910&lt;CMSPRO_DOCUMENTS CHANNELCODE=&quot;&quot; DOCUMENTTYPE=&quot;0|1|2|3|8|9&quot; NUM=&quot;5&quot; STARTPOS=&quot;0&quot;&gt;&lt;/CMSPRO_DOCUMENTS&gt;&lt;CMSPRO_DOCUMENTS CHANNELCODE=&quot;&quot; DOCUMENTTYPE=&quot;0|1|2|3|8|9&quot; NUM=&quot;1000&quot; STARTPOS=&quot;0&quot; PAGENAVIGATIONID=&quot;page-div&quot; PAGENAVIGATIONCLASS=&quot;&quot; PAGESIZE=&quot;0&quot;&gt;&lt;/CMSPRO_DOCUMENTS&gt;（SITECODE='chengdu' 跨站点读取数据）（ORDER=&quot;PUBLISHED_TIME DESC&quot; 文章列表排序字段）&lt;CMSPRO_APPENDIXS MODE=&quot;IMG&quot; NUM=&quot;1&quot; STARTPOS=&quot;0&quot;&gt;&lt;/CMSPRO_APPENDIXS&gt;&lt;CMSPRO_APPENDIX FIELD='path'&gt;&lt;/CMSPRO_APPENDIX&gt;&lt;CMSPRO_DOCUMENT FIELD='url'&gt;&lt;/CMSPRO_DOCUMENT&gt;&lt;CMSPRO_DOCUMENT FIELD=&quot;title&quot;&gt;文章标题&lt;/CMSPRO_DOCUMENT&gt;&lt;CMSPRO_DOCUMENT FIELD=&quot;content&quot;&gt;文章内容&lt;/CMSPRO_DOCUMENT&gt;&lt;CMSPRO_DOCUMENT FIELD=&quot;publishedTime&quot; DATEFORMAT=&quot;yyyy-MM-dd&quot;&gt;时间&lt;/CMSPRO_DOCUMENT&gt; 获取子栏目123&lt;CMSPRO_CHANNELS CODE=&quot;&quot; CHILDLEVEL=&quot;1&quot; CHILDTYPE=&quot;0|1|2|3&quot; NUM=&quot;&quot; STARTPOS=&quot;0&quot;&gt;&lt;/CMSPRO_CHANNELS&gt;&lt;CMSPRO_CHANNEL FIELD='url'&gt;&lt;/CMSPRO_CHANNEL&gt;&lt;CMSPRO_CHANNEL FIELD=&quot;channelName&quot;&gt;&lt;/CMSPRO_CHANNEL&gt; 获取关联稿件12345&lt;CMSPRO_RELDOCUMENTS STARTPOS='0' NUM='5' MODE='ALL'&gt; &lt;li&gt; &lt;CMSPRO_DOCUMENT field='subTitle' autolink='true' target='_blank' num=&quot;100&quot;&gt;&lt;/CMSPRO_DOCUMENT&gt; &lt;/li&gt;&lt;/CMSPRO_RELDOCUMENTS&gt; 面包屑导航1&lt;CMSPRO_LOCATION LINK=&quot;&amp;nbsp;&amp;gt;&amp;nbsp;&quot; SELFONLY=&quot;false&quot; AUTOLINK=&quot;true&quot; TARGET=&quot;_blank&quot; LINKEXTRA=&quot;&quot; HOMEPAGEDESC=&quot;首页&quot;&gt;当前位置&lt;/CMSPRO_LOCATION&gt; 来源1&lt;CMSPRO_DOCUMENT FIELD=&quot;source&quot; DOMAINMETADATANAME=&quot;默认元数据集&quot;&gt;信息来源&lt;/CMSPRO_DOCUMENT&gt; 公共头和公共尾123456789&lt;!--header--&gt;&lt;!--#include virtual=&quot;&lt;CMSPRO_CHANNEL CODE='c104734' FIELD='url'&gt;&lt;/CMSPRO_CHANNEL&gt;&quot;--&gt;&lt;!--header end--&gt;&lt;!-- main --&gt;&lt;!-- main end --&gt;&lt;!--footer--&gt;&lt;!--#include virtual=&quot;&lt;CMSPRO_CHANNEL CODE='c104735' FIELD='url'&gt;&lt;/CMSPRO_CHANNEL&gt;&quot;--&gt;&lt;!--footer end--&gt; 自动产生 a 标签1&lt;CMSPRO_CHANNEL CODE=&quot;c103022&quot; AUTOLINK=&quot;true&quot; LINKALT=&quot;true&quot; target=&quot;_blank&quot; FIELD=&quot;channelName&quot;&gt;政府采购&lt;/CMSPRO_CHANNEL&gt; 循环的时候自动编号1&lt;CMSPRO_ROWNO&gt;当前记录序号&lt;/CMSPRO_ROWNO&gt; 归档相关属性省平台可用，市平台未知例子可看交通厅“脱贫攻坚”专题：http://jtt.sc.gov.cn/jtt/c102634/tpgj.shtml 1234栏目归档时间：&lt;cmspro_channel field='archiveRevoke' DATEFORMAT=&quot;yyyy-MM-dd&quot;&gt;&lt;/cmspro_channel&gt;栏目归档属性：&lt;cmspro_channel field='archiveSuport' &gt;&lt;/cmspro_channel&gt;稿件归档时间：&lt;cmspro_document field=&quot;archivedTime &quot; dateformat=&quot;yyyy-MM-dd&quot;&gt;&lt;/cmspro_document&gt;稿件归档属性：&lt;cmspro_document field='isArchives'&gt;&lt;/cmspro_document&gt;","link":"/2021/03/15/jiyuehua-tags/"}],"tags":[{"name":"html","slug":"html","link":"/tags/html/"}],"categories":[{"name":"前端","slug":"前端","link":"/categories/%E5%89%8D%E7%AB%AF/"},{"name":"集约化平台","slug":"集约化平台","link":"/categories/%E9%9B%86%E7%BA%A6%E5%8C%96%E5%B9%B3%E5%8F%B0/"}]}